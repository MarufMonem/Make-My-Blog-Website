<%- include("../views/partials/header") %>
<link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light+Two&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Handlee&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../adminFaq.css">
<title>Admin | Updates </title>
</head>

<body>
    <%- include("../views/partials/alertMsgInteractive") %>
    <%- include("../views/partials/adminNav") %>

    <section>
        <!-- //Header Image -->
        <div class="scallop-up"></div>
        <div id="header">
            <h1 class="text-center display-3 py-5 mb-0">Admin: Updates Section</h1>
        </div>

        <div class="scallop-down"></div>
    </section>

    <%- include("../views/partials/alertMsg") %>

    <br>
    <!-- Body content -->
    <section>
        <div class="container-fluid">
            <!-- <div class="sidenav" id="sideNav">
                <a href="#table" class="btn btn-light d-block mb-2">All faq</a>
                <a href="#form" class="btn btn-light d-block mb-2">Create new</a>
            </div> -->
            <div class="row">
                <!-- naviagtion button -->
                <div class="col-md-3" id="sideNav">
                    <a href="#table" class="btn btn-light d-block mb-2">All Updates</a>
                    <a href="#form" class="btn btn-light d-block mb-2">Create new</a>
                </div>

                <!-- nav content -->
                <div class="col-sm=12 col-md-9" id="table">
                    <!-- table -->
                    <div class="mx-auto table-responsive">
                        <table class="table  table-hover table-dark ">
                            <thead class="thead-light">
                                <tr class="text-center">
                                    <th>Title</th>
                                    <th>Image</th>
                                    <th>Desription</th>
                                    <th>Created</th>
                                    <th>Update</th>
                                    <th>Delete</th>
                                </tr>
                            </thead>
                            <%allUpdate.forEach(function(update){
                                var date = new Date(update.created);
                                %>
                            <tr class="text-center">
                                <td> <a href="/updates" id="faqTitle"><%= update.title %> </a> </td>
                                <td>
                                    <%if(!update.image){ %>
                                    <p>No image</p>
                                    <%}else{%>
                                    <img class="" src="<%= update.image %>" alt="update image">
                                    <%}%>
                                    
                                </td>
                                <td><%= update.content.substring(0,50) %> ...</td>
                                <td><%=date.toDateString()%></td>
                                <td>
                                    <a href="/updates/edit/<%=update._id%>" class="btn btn-sm btn-outline-light"><i
                                            class="far fa-edit"></i></a>
                                </td>
                                <td>
                                    <form action="/updates/delete/<%=update._id%>?_method=DELETE" method="POST">
                                        <button class="btn btn-sm btn-outline-danger"><i
                                                class="far fa-trash-alt"></i></button>
                                    </form>
                                </td>
                            </tr>

                            <%})%>

                        </table>
                    </div>
                    <hr>
                    <div class="container-fluid">
                        <!-- Form -->
                        <h1 class="text-white text-center">Add a new update</h1>
                        <form class=" mx-auto w-50" action="/updates/new" method="POST" id="form">
                            <div class="form-group">
                                <label>Title</label>
                                <input type="name" class="form-control" placeholder="Enter title" name=update[title]>
                            </div>
                            <div class="form-group">
                                <label>Image</label>
                                <input type="name" class="form-control" placeholder="Enter image link" name=update[image]>
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea class="form-control" name=update[content] rows="8"
                                    placeholder="Description here"></textarea>
                            </div>
                            <button type="submit" class="btn btn-danger w-50">Submit</button>
                        </form>
                    </div>

                </div>


            </div>
        </div>
    </section>

    <section class="mt-3">

    </section>

    <%- include("../views/partials/bottomNavbar") %>
    <%- include("../views/partials/footer") %>